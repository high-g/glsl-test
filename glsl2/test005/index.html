<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>test</title>
</head>
<body>
<canvas id="canvas"></canvas>

<script id="vs" type=""></script>
<script id="fs" type=""></script>
<script>
const c = document.getElementById('canvas')
const gl = c.getContext('webgl')
const cw = 512
const ch = 512
const mx = 0.5
const my = 0.5
const time = 0.0
const tempTime = 0.0
const fps = 1000 / 30
const uniLocation = []
let run, prg

const init = () => {
  c.width = cw
  c.height = ch
  
}

const create_shader = (id) => {
  let shader
  const scriptElement = document.getElementById(id)

  switch(scriptElement.type) {
    case 'x-shader/x-vertex':
      shader = gl.createShader(gl.VERTEX_SHADER)
      break
    case 'x-shader/x-fragment':
      shader = gl.createShader(gl.FRAGMENT_SHADER)
      break
    default:
      return
  }

  gl.shaderSource(shader, scriptElement.text)
  gl.compileShader(shader)
  if(gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    return shader
  } else {
    alert(gl.getShaderInfoLog(shader))
  }
}

const create_program = (vs, fs) => {
  // プログラムオブジェクト生成
  const program = gl.createProgram()

  // プログラムオブジェクトにシェーダを割り当てる
  gl.attachShader(program, vs)
  gl.attachShader(program, fs)

  // シェーダをリンク
  gl.linkProgram(program)

  if(gl.getProgramParameter(program, gl.LINK_STATUS)) {
    gl.useProgram(program)
    return program
  } else {
    alert(gl.getShaderInfoLog(program))
  }
}

const create_vbo = (data) => {
  // バッファオブジェクト生成
  const vbo = gl.createBuffer()
  // バッファをバインド
  gl.bindBuffer(gl.ARRAY_BUFFER, vbo)
  // バッファにデータセット
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW)
  // バッファのバインドを無効化
  gl.bindBuffer(gl.ARRAY_BUFFER, null)
  return vbo
}

init()
</script>
</body>
</html>